## 1. 文件的打开和关闭
### 1.1 打开文件

在python中，可以使用内置函数open()打开指定的文件并返回相应的文件对象。语法格式：
```python
open(文件路径 [,打开模式 [,缓冲区 [, 编码]]])
```
- 文件路径用于指定要打开文件的路径名，可以是绝对地址，也可以是相对地址
- 打开模式擦拭指定打开文件的模式，其默认值为“r”,表示在文本模式下打开文件并用于读取。
  
打开模式| 描述 | 打开模式| 描述
:---------:|----------|:---------:|---
rt | 以只读模式打开一个文本文件 | rt+|以可读/写模式打开一个文本文件 
wt | 以只写模式打开一个文本文件 | wt+|以可读/写模式打开一个文本文件 
at | 以追加模式打开一个文本文件 | at+|以可读/写模式打开一个文本文件 
rb | 以只读模式打开一个二进制文件 | rb+|以可读/写模式打开一个二进制文件 
wb | 以只写模式打开一个二进制文件 | wb+|以可读/写模式打开一个二进制文件  
ab | 以追加模式打开一个二进制文件 | ab+|以可读/写模式打开一个二进制文件 
- 缓冲区参数用于设置文件操作是否使用缓冲区。该参数的默认值为-1，表示使用缓冲存储，并使用系统默认的缓冲区大小；如果该参数设置为0（仅适用于二进制文件），则表示不使用缓冲存储；如果该参数设置为1（仅适用于文本文件），则表示使用行缓冲；如果该参数设置为大于1的整数，则表示使用缓冲存储，并且缓冲区大小由该参数指定。
- 编码参数用于指定文件所使用的编码格式，该参数只在文本模式下使用。该参数默认编码方式依赖于平台。若要以Unicode编码格式创建文本文件，可将编码格式设置为“utf-32”；若要以UTF-8编码格式创建文件，可将该参数设置为“utf-8”。

### 1.2 关闭文件
使用内置函数open()成功打开一个文件时会返回一个文件对象，该文件对象具有一定的属性和方法，可以用来对所打开的文件进行各种操作。完成文件操作后，需要及时地关闭文件，以释放文件对象并防止文件中的数据丢失。

在python中，可以通过调用文件对象close()方法来关闭文件。语法如下：
```python
文件对象.close()
```
> close()方法用于关闭用open()函数打开的文件，将缓冲区中的数据写入文件，然后释放文件对象

``` python
# 打开文件
file = open("/Users/free.hao/programe/demo.text")
print("文件名：", file.name)
print("文件缓冲区：", file.buffer)
print("文件是否打开：", file.closed)
print("文件的编码：", file.encoding)

# 关闭文件
file.close()
print("文件是否打开：", file.closed)

```
结果：

```
文件名： /Users/free.hao/programe/demo.text
文件缓冲区： <_io.BufferedReader name='/Users/free.hao/programe/demo.text'>
文件是否打开： False
文件的编码： UTF-8
文件是否打开： True
```

## 2. 文本文件操作

### 2.1 read()方法读取文本内容

文件对象的read()方法可以用于从文本流当前位置读取指定数量的字符并以字符串形式返回。格式如下：
```python
变量 = 文件对象.read([size])
```
- size ： 可选的非负整数，用于指定从文本流当前位置开始读取的字符数量。如果该参数为负或省略，系统则从文件当前位置开始读取，直至文件结束。如果参数size的值大于当前位置到文件末尾的字符数，系统则仅读取并返回这些字符。

刚打开文件时，当前读取位置就在文件开头，每次读取完成之后，读取位置会自动移动到下一个字符，直至达到文件末尾。如果当前在文件末尾，系统会返回一个空字符串。

```python
# 打开文件
file = open("/Users/free.hao/programe/demo.text")

print("全部内容：", content)

# 关闭文件并再次打开
file.close()
file = open("/Users/free.hao/programe/demo.text")
content = file.read(9)
print("前9个字符：", content)
content = file.read()
print("剩余的字符：", content)

```

```
全部内容： 我喜欢python程序设计

前9个字符： 我喜欢python
剩余的字符： 程序设计
```
### 2.2 readline()方法读取文本内容
文件对象的readline()方法可以用于从文本流当前位置读取指定数量的字符并以字符串形式返回。格式如下：
```python
变量 = 文件对象.readline([size])
```
- size ： 可选的非负整数，用于指定从文本流当前行的当前位置开始读取的字符数量。如果省略该参数，系统则从文件当前行的当前位置开始读取，直至当前行的末尾，包括换行符“\n”。如果参数size的值大于当前位置到行末尾的字符数，系统则仅读取并返回这些字符，包括换行符“\n”。

刚打开文件时，当前读取位置在第一行。，每次读完一行之后，读取位置会自动移动到下一行，直至达到文件末尾。如果当前在文件末尾，系统会返回一个空字符串。

```python
# 打开文件
file = open("/Users/free.hao/programe/demo.text")

str = file.readline()

print(str)

str = file.readline()
print(str[:-1]) # -1 表示最右边字符
```
结果：

```python
python是一种程序设计语言

我十分喜欢python
```

### 2.3 readlines()方法读取文件内容
文件对象的readlines())方法可以用于从文本流上读取所有可用的行并返回这些行构成的列表。格式如下：
```python
变量 = 文件对象.readlines()
```
readlines()方法返回一个列表，列表中的元素即每一行的字符串，包括换行符“\n”在内。如果当前处于文件末尾，系统返回一个空列表。

文件内容：
```
望庐山瀑布
唐代：李白
日照香炉生紫烟，
遥看瀑布挂前川。
飞流直下三千尺，
疑是银河落九天。

```

```python
# 打开文件
file = open("/Users/free.hao/programe/demo.text")

lines = file.readlines()

for line in lines:
    # 如果有换行符
    if line.find("\n") != -1:
        line = line[:-1]  # 通过切片去除换行符
    # 如果没有逗号或句号
    if line.find("，") == -1 and line.find("。") == -1:
        print("{:^23}".format(line))  # 居中对齐，23宽度
        # 如果，号结束，不换行
    elif line.find("，") != -1:
        print(line, sep="", end="")
    else:
        print(line)
file.close()

```

结果：
```
         望庐山瀑布         
         唐代：李白         
日照香炉生紫烟，遥看瀑布挂前川。
飞流直下三千尺，疑是银河落九天。
```